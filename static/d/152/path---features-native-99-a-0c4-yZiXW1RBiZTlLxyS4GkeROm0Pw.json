{"data":{"site":{"siteMetadata":{"title":"node-postgres","docsLocation":"https://github.com/hasura/gatsby-gitbook-boilerplate/tree/master/content"}},"mdx":{"fields":{"id":"f803459c-64b6-50cf-a8e8-01dcb0bef2d1","title":"Native","slug":"/features/native"},"code":{"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", null, \"Native C/C++ bindings to libpq\"), mdx(\"p\", null, \"Native bindings between node.js & \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.postgresql.org/docs/9.5/static/libpq.html\"\n  }), \"libpq\"), \" are provided by the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/brianc/node-pg-native\"\n  }), \"node-pg-native\"), \" package.  node-postgres can consume this package & use the native bindings to access the PostgreSQL server while giving you the same interface that is used with the JavaScript version of the library.\"), mdx(\"p\", null, \"To use the native bindings first you'll need to install them:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sh\"\n  }), \"$ npm install pg pg-native\\n\")), mdx(\"p\", null, \"Once \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pg-native\"), \" is installed instead of requiring a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Client\"), \" or \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Pool\"), \" constructor from \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pg\"), \" you do the following:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"const { Client, Pool } = require('pg').native\\n\")), mdx(\"p\", null, \"When you access the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".native\"), \" property on \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"require('pg')\"), \" it will automatically require the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pg-native\"), \" package and wrap it in the same API.\"), mdx(\"div\", {\n    className: \"message is-warning\"\n  }, mdx(\"div\", {\n    className: \"message-body\"\n  }, \"Care has been taken to normalize between the two, but there might still be edge cases where things behave subtly differently due to the nature of using libpq over handling the binary protocol directly in JavaScript, so it's recommended you chose to either use the JavaScript driver or the native bindings both in development and production.  For what its worth: I use the pure JavaScript driver because the JavaScript driver is more portable (doesn't need a compiler), and the pure JavaScript driver is _plenty_ fast.\")), mdx(\"p\", null, \"Some of the modules using advanced features of PostgreSQL such as \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/brianc/node-pg-query-stream\"\n  }), \"pg-query-stream\"), \", \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/brianc/node-pg-cursor\"\n  }), \"pg-cursor\"), \",and \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/brianc/node-pg-copy-streams\"\n  }), \"pg-copy-streams\"), \" need to operate directly on the binary stream and therefore are incompatible with the native bindings.\"));\n}\n;\nMDXContent.isMDXComponent = true;"},"tableOfContents":{"items":[{"url":"#native-cc-bindings-to-libpq","title":"Native C/C++ bindings to libpq"}]},"parent":{"__typename":"File","relativePath":"features/native.md"},"frontmatter":{"metaTitle":null,"metaDescription":null}},"allMdx":{"edges":[{"node":{"fields":{"slug":"/announcements","title":"Announcements"}}},{"node":{"fields":{"slug":"/","title":"Welcome"}}},{"node":{"fields":{"slug":"/api/copy-streams","title":"Copy Streams"}}},{"node":{"fields":{"slug":"/api/query-stream","title":"Query Stream"}}},{"node":{"fields":{"slug":"/api/cursor","title":"Cursor"}}},{"node":{"fields":{"slug":"/api/types","title":"Types"}}},{"node":{"fields":{"slug":"/api/result","title":"Result"}}},{"node":{"fields":{"slug":"/api/query","title":"Query"}}},{"node":{"fields":{"slug":"/features/cursor","title":"Cursor"}}},{"node":{"fields":{"slug":"/features/listen-notify","title":"Listen Notify"}}},{"node":{"fields":{"slug":"/features/native","title":"Native"}}},{"node":{"fields":{"slug":"/features/pooling","title":"Pooling"}}},{"node":{"fields":{"slug":"/features/connecting","title":"Connecting"}}},{"node":{"fields":{"slug":"/features/streams","title":"Streams"}}},{"node":{"fields":{"slug":"/features/transactions","title":"Transactions"}}},{"node":{"fields":{"slug":"/features/types","title":"Types"}}},{"node":{"fields":{"slug":"/guides/custom-type-parser","title":"Custom Type Parser"}}},{"node":{"fields":{"slug":"/guides/pool-config","title":"Pool Config"}}},{"node":{"fields":{"slug":"/guides/project-structure","title":"Project Structure"}}},{"node":{"fields":{"slug":"/guides/async-express","title":"Async Express"}}},{"node":{"fields":{"slug":"/guides/webpack-bundling","title":"Webpack Bundling"}}},{"node":{"fields":{"slug":"/guides/upgrading","title":"Upgrading"}}},{"node":{"fields":{"slug":"/features/ssl","title":"SSL"}}},{"node":{"fields":{"slug":"/features/queries","title":"Queries"}}}]}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"f803459c-64b6-50cf-a8e8-01dcb0bef2d1"}}